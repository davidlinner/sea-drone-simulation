<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Static Sea Drone Test</title>
    <script src="./dist/sea-drone.js"></script>
</head>
<body>
<script>

    function loop({control, position, map, detector, container}){

        const heading =  position.getHeading();
        //console.log(heading);

        let rudder = 0.2;

        // if(heading > 1 && heading <= 180){
        //     rudder = heading > 45 ? 0.5 : 0.05;
        //     console.log('turn left', rudder, heading);
        // } else if(heading < 359 && heading > 180){
        //     rudder = heading < 315 ? -0.5 : -0.05;
        //     console.log('turn right', rudder, heading);
        // }

        control.setRudder(rudder);
        control.setVelocity(0.3);

        //console.log(heading);
        // console.log(position.getVelocity());
        // console.log(position.getPosition());
        // console.log(map.getFence());

        detector.getDetectedWaste().forEach(({direction, proximity}) => console.log(direction, proximity));

        console.log(container.getWeight());


    }

    const simulation = createSimulation({loop, width: 500, height: 500, numberOfBottles: 6});
    simulation.start();

    //setTimeout(()=>{ simulation.stop()}, 10000);
</script>
</body>
</html>